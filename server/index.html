<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Graphique</title>

</head>
<body>
    <canvas id="myChart" width="400" height="400"></canvas>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script src="/js/index.js"></script>
    <script>
        $(document).ready(function(){
            const ctx = $("#myChart");

            let mavariable='1284218774354'; //timestamp
            let mavariableTo='1284218774354'; //timestamp

            console.log('Getting data');
            $.get(`/reader.php?from=${mavariable}&to=${mavariableTo}`, function(values){
                console.log(values);
                //TODO charjs
                let datas = jQuery.parseJSON(values);

                console.log(datas.map(d => d.date));

                let myChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: datas.map(d => d.date),
                        datasets: [
                            {
                                label: 'Température',
                                data: datas.map(d => d.temperature),
                                borderColor: 'rgb(75, 192, 192)'
                            },
                            {
                                label: 'Humidité',
                                data: datas.map(d => d.humidite),
                                borderColor: 'rgb(255, 87, 51)',
                            }
                        ]
                    }
                });
            });
        });
    </script>
</body>
</html>